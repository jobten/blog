/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{325:function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}};t.exports=r},328:function(t,e,r){var n,o,c,l,f;n=r(329),o=r(325).utf8,c=r(330),l=r(325).bin,(f=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?l.stringToBytes(t):o.stringToBytes(t):c(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),m=8*t.length,a=1732584193,b=-271733879,d=-1732584194,h=271733878,i=0;i<r.length;i++)r[i]=16711935&(r[i]<<8|r[i]>>>24)|4278255360&(r[i]<<24|r[i]>>>8);r[m>>>5]|=128<<m%32,r[14+(m+64>>>9<<4)]=m;var v=f._ff,y=f._gg,_=f._hh,w=f._ii;for(i=0;i<r.length;i+=16){var x=a,T=b,k=d,dd=h;a=v(a,b,d,h,r[i+0],7,-680876936),h=v(h,a,b,d,r[i+1],12,-389564586),d=v(d,h,a,b,r[i+2],17,606105819),b=v(b,d,h,a,r[i+3],22,-1044525330),a=v(a,b,d,h,r[i+4],7,-176418897),h=v(h,a,b,d,r[i+5],12,1200080426),d=v(d,h,a,b,r[i+6],17,-1473231341),b=v(b,d,h,a,r[i+7],22,-45705983),a=v(a,b,d,h,r[i+8],7,1770035416),h=v(h,a,b,d,r[i+9],12,-1958414417),d=v(d,h,a,b,r[i+10],17,-42063),b=v(b,d,h,a,r[i+11],22,-1990404162),a=v(a,b,d,h,r[i+12],7,1804603682),h=v(h,a,b,d,r[i+13],12,-40341101),d=v(d,h,a,b,r[i+14],17,-1502002290),a=y(a,b=v(b,d,h,a,r[i+15],22,1236535329),d,h,r[i+1],5,-165796510),h=y(h,a,b,d,r[i+6],9,-1069501632),d=y(d,h,a,b,r[i+11],14,643717713),b=y(b,d,h,a,r[i+0],20,-373897302),a=y(a,b,d,h,r[i+5],5,-701558691),h=y(h,a,b,d,r[i+10],9,38016083),d=y(d,h,a,b,r[i+15],14,-660478335),b=y(b,d,h,a,r[i+4],20,-405537848),a=y(a,b,d,h,r[i+9],5,568446438),h=y(h,a,b,d,r[i+14],9,-1019803690),d=y(d,h,a,b,r[i+3],14,-187363961),b=y(b,d,h,a,r[i+8],20,1163531501),a=y(a,b,d,h,r[i+13],5,-1444681467),h=y(h,a,b,d,r[i+2],9,-51403784),d=y(d,h,a,b,r[i+7],14,1735328473),a=_(a,b=y(b,d,h,a,r[i+12],20,-1926607734),d,h,r[i+5],4,-378558),h=_(h,a,b,d,r[i+8],11,-2022574463),d=_(d,h,a,b,r[i+11],16,1839030562),b=_(b,d,h,a,r[i+14],23,-35309556),a=_(a,b,d,h,r[i+1],4,-1530992060),h=_(h,a,b,d,r[i+4],11,1272893353),d=_(d,h,a,b,r[i+7],16,-155497632),b=_(b,d,h,a,r[i+10],23,-1094730640),a=_(a,b,d,h,r[i+13],4,681279174),h=_(h,a,b,d,r[i+0],11,-358537222),d=_(d,h,a,b,r[i+3],16,-722521979),b=_(b,d,h,a,r[i+6],23,76029189),a=_(a,b,d,h,r[i+9],4,-640364487),h=_(h,a,b,d,r[i+12],11,-421815835),d=_(d,h,a,b,r[i+15],16,530742520),a=w(a,b=_(b,d,h,a,r[i+2],23,-995338651),d,h,r[i+0],6,-198630844),h=w(h,a,b,d,r[i+7],10,1126891415),d=w(d,h,a,b,r[i+14],15,-1416354905),b=w(b,d,h,a,r[i+5],21,-57434055),a=w(a,b,d,h,r[i+12],6,1700485571),h=w(h,a,b,d,r[i+3],10,-1894986606),d=w(d,h,a,b,r[i+10],15,-1051523),b=w(b,d,h,a,r[i+1],21,-2054922799),a=w(a,b,d,h,r[i+8],6,1873313359),h=w(h,a,b,d,r[i+15],10,-30611744),d=w(d,h,a,b,r[i+6],15,-1560198380),b=w(b,d,h,a,r[i+13],21,1309151649),a=w(a,b,d,h,r[i+4],6,-145523070),h=w(h,a,b,d,r[i+11],10,-1120210379),d=w(d,h,a,b,r[i+2],15,718787259),b=w(b,d,h,a,r[i+9],21,-343485551),a=a+x>>>0,b=b+T>>>0,d=d+k>>>0,h=h+dd>>>0}return n.endian([a,b,d,h])})._ff=function(a,b,t,e,r,s,n){var o=a+(b&t|~b&e)+(r>>>0)+n;return(o<<s|o>>>32-s)+b},f._gg=function(a,b,t,e,r,s,n){var o=a+(b&e|t&~e)+(r>>>0)+n;return(o<<s|o>>>32-s)+b},f._hh=function(a,b,t,e,r,s,n){var o=a+(b^t^e)+(r>>>0)+n;return(o<<s|o>>>32-s)+b},f._ii=function(a,b,t,e,r,s,n){var o=a+(t^(b|~e))+(r>>>0)+n;return(o<<s|o>>>32-s)+b},f._blocksize=16,f._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(f(t,e));return e&&e.asBytes?r:e&&e.asString?l.bytesToString(r):n.bytesToHex(r)}},329:function(t,e){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,b){return t<<b|t>>>32-b},rotr:function(t,b){return t<<32-b|t>>>b},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var i=0;i<t.length;i++)t[i]=n.endian(t[i]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,b=0;i<t.length;i++,b+=8)e[b>>>5]|=t[i]<<24-b%32;return e},wordsToBytes:function(t){for(var e=[],b=0;b<32*t.length;b+=8)e.push(t[b>>>5]>>>24-b%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],i=0;i<t.length;i+=3)for(var n=t[i]<<16|t[i+1]<<8|t[i+2],o=0;o<4;o++)8*i+6*o<=8*t.length?e.push(r.charAt(n>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],i=0,n=0;i<t.length;n=++i%4)0!=n&&e.push((r.indexOf(t.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<2*n|r.indexOf(t.charAt(i))>>>6-2*n);return e}},t.exports=n},330:function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(r(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}(t)||!!t._isBuffer)}},360:function(t,e,r){"use strict";r.r(e);r(20);var n=r(2),o=r(328),c=r.n(o),l={layout:"login",methods:{sendEmailCode:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/sendcode?email="+t.form.email);case 2:t.send.timer=10,t.timer=setInterval((function(){t.send.timer-=1,0===t.send.timer&&clearInterval(t.timer)}),1e3);case 4:case"end":return e.stop()}}),e)})))()},resetCaptcha:function(){this.code.captcha="/api/captcha?_t"+(new Date).getTime()},handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=9;break}return n={email:t.form.email,passwd:c()(t.form.passwd),captcha:t.form.captcha,emailcode:t.form.emailcode},e.next=4,t.$http.post("/user/login",n);case 4:o=e.sent,console.log(o),0==o.code?(t.$message.success("登录成功"),localStorage.setItem("KKB_USER_TOKEN",o.data.token),setTimeout((function(){t.$router.push("/")}),500)):t.$message.error(o.message),e.next=10;break;case 9:console.log("校验失败");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},computed:{sendText:function(){return this.send.timer<=0?"发送":"".concat(this.send.timer,"s后发送")}},data:function(){return{send:{timer:0},form:{email:"1017665401@qq.com",passwd:"123456",captcha:""},rules:{email:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入正确的邮箱格式"}],captcha:[{required:!0,message:"请输入验证码"}],emailcode:[{required:!0,message:"请输入邮箱验证码"}],passwd:[{required:!0,pattern:/^[\w_-]{6,12}$/g,message:"请输入6~12位密码"}]},code:{captcha:"/api/captcha"}}}},f=r(13),component=Object(f.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-container"},[r("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{"label-width":"100px",model:t.form,rules:t.rules}},[r("div",{staticClass:"title-container"},[r("img",{attrs:{src:"/logo.png",alt:""}})]),t._v(" "),r("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[r("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),r("el-form-item",{staticClass:"captcha-container",attrs:{prop:"captcha",label:"图片验证码"}},[r("div",{staticClass:"captcha"},[r("img",{attrs:{src:t.code.captcha},on:{click:t.resetCaptcha}})]),t._v(" "),r("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:t.form.captcha,callback:function(e){t.$set(t.form,"captcha",e)},expression:"form.captcha"}})],1),t._v(" "),r("el-form-item",{staticClass:"captcha-container",attrs:{prop:"emailcode",label:"邮箱验证码"}},[r("div",{staticClass:"captcha"},[r("el-button",{attrs:{disabled:t.send.timer>0,type:"primary"},on:{click:t.sendEmailCode}},[t._v(t._s(t.sendText))])],1),t._v(" "),r("el-input",{attrs:{placeholder:"请输入邮件验证码"},model:{value:t.form.emailcode,callback:function(e){t.$set(t.form,"emailcode",e)},expression:"form.emailcode"}})],1),t._v(" "),r("el-form-item",{attrs:{prop:"passwd",label:"密码"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.form.passwd,callback:function(e){t.$set(t.form,"passwd",e)},expression:"form.passwd"}})],1),t._v(" "),r("el-form-item",{attrs:{label:" "}},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登录")]),t._v(" "),r("nuxt-link",{attrs:{to:"/register"}},[r("el-button",{attrs:{type:"primary"}},[t._v("注册")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);