(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{340:function(t,e,r){var content=r(352);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(45).default)("06add996",content,!0,{sourceMap:!1})},351:function(t,e,r){"use strict";r(340)},352:function(t,e,r){(e=r(44)(!1)).push([t.i,".article{padding:10px;background:#fff}.rotate{transform:rotate(180deg)}",""]),t.exports=e},361:function(t,e,r){"use strict";r.r(e);r(20);var n=r(2),c=r(131),o=r(337),l=r.n(o),f=(r(338),{components:{UserDisplay:c.a},mounted:function(){var t=this.$route.params.id;this.id=t,this.getArticle();var e=localStorage.getItem("KKB_USER_TOKEN");this.token=e},data:function(){return{isFollow:!1,likeStatus:!1,dislikeStatus:!1,article:{title:"",author:{}}}},updated:function(){document.querySelectorAll("pre").forEach((function(t){l.a.highlightBlock(t)}))},methods:{getLikeStatus:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/user/article/"+t.id);case 2:0==(r=e.sent).code&&(t.likeStatus=r.data.like,t.dislikeStatus=r.data.dislike);case 4:case"end":return e.stop()}}),e)})))()},likeAction:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.likeStatus?"delete":"put",e.next=3,t.$http[r]("/user/likeArticle/"+t.id);case 3:0==(n=e.sent).code&&(t.getArticle(),t.$notify({title:n.message,type:"success"}));case 5:case"end":return e.stop()}}),e)})))()},getArticle:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/article/"+t.id);case 2:r=e.sent,t.article=r.data,t.token&&(t.checkFollowStatus(),t.getLikeStatus());case 5:case"end":return e.stop()}}),e)})))()},checkFollowStatus:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/user/follow/"+t.article.author._id);case 2:0==(r=e.sent).code&&(t.isFollow=r.data.isFollow);case 4:case"end":return e.stop()}}),e)})))()},follow:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.put("/user/follow/"+t.article.author._id);case 2:e.sent,t.checkFollowStatus();case 4:case"end":return e.stop()}}),e)})))()},cancelfollow:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.delete("/user/follow/"+t.article.author._id);case 2:e.sent,t.checkFollowStatus();case 4:case"end":return e.stop()}}),e)})))()}}}),d=(r(351),r(13)),component=Object(d.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"kkb-container"},[r("UserDisplay",{attrs:{user:t.article.author}},[t.isFollow?r("el-button",{attrs:{type:"success"},on:{click:t.cancelfollow}},[t._v("已关注")]):r("el-button",{on:{click:t.follow}},[t._v("关注")])],1),t._v(" "),r("el-divider"),t._v(" "),r("div",{staticClass:"article",domProps:{innerHTML:t._s(t.article.article_html)}}),t._v(" "),r("el-divider"),t._v(" "),r("el-button",{attrs:{type:t.likeStatus?"success":"default"},on:{click:t.likeAction}},[r("i",{staticClass:"el-icon-thumb"},[t._v(t._s(t.article.like))])])],1)}),[],!1,null,null,null);e.default=component.exports}}]);