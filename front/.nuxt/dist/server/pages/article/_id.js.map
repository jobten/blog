{"version":3,"file":"pages/article/_id.js","sources":["webpack:///./node_modules/highlight.js/styles/atom-one-dark.css","webpack:///./pages/article/_id.vue?1d37","webpack:///./pages/article/_id.vue?6ac6","webpack:///./pages/article/_id.vue?30fd","webpack:///./pages/article/_id.vue?6bbe","webpack:///./pages/article/_id.vue","webpack:///./pages/article/_id.vue?b982","webpack:///./pages/article/_id.vue?5ee1","webpack:///./node_modules/highlight.js/styles/atom-one-dark.css?1e60"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".hljs{display:block;overflow-x:auto;padding:.5em;color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add CSS to SSR context\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesServer.js\").default\nmodule.exports.__inject__ = function (context) {\n  add(\"06add996\", content, true, context)\n};","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--3-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=style&index=0&lang=css&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".article{padding:10px;background:#fff}.rotate{transform:rotate(180deg)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"kkb-container\"},[_c('UserDisplay',{attrs:{\"user\":_vm.article.author}},[(_vm.isFollow)?_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.cancelfollow}},[_vm._v(\"已关注\")]):_c('el-button',{on:{\"click\":_vm.follow}},[_vm._v(\"关注\")])],1),_vm._ssrNode(\" \"),_c('el-divider'),_vm._ssrNode(\" <div class=\\\"article\\\">\"+(_vm._s(_vm.article.article_html))+\"</div> \"),_c('el-divider'),_vm._ssrNode(\" \"),_c('el-button',{attrs:{\"type\":_vm.likeStatus?'success':'default'},on:{\"click\":_vm.likeAction}},[_c('i',{staticClass:\"el-icon-thumb\"},[_vm._v(_vm._s(_vm.article.like))])])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport UserDisplay from '~/components/UserDisplay.vue'\nimport hljs from 'highlight.js/lib/core'\nimport 'highlight.js/styles/atom-one-dark.css'\n\nconst highlightCode = () => {\n  const preEl = document.querySelectorAll('pre')\n\n  preEl.forEach((el) => {\n    hljs.highlightBlock(el)\n  })\n}\n\nexport default {\n  components:{UserDisplay},\n  mounted(){\n    let {id} = this.$route.params\n    this.id = id\n    this.getArticle()\n\n    // 用户已登录 \n    const token = localStorage.getItem('KKB_USER_TOKEN')\n    this.token = token\n\n  },\n  data(){\n    return {\n      isFollow:false,\n      likeStatus:false,\n      dislikeStatus:false,\n      article:{\n        title:'',\n        author:{}\n      }\n    }\n  },\n  updated() {\n    highlightCode()\n  },\n  methods:{\n    async getLikeStatus(){\n      // 修改likeStatus\n      let ret = await this.$http.get('/user/article/'+this.id)\n      if(ret.code==0){\n        this.likeStatus = ret.data.like\n        this.dislikeStatus = ret.data.dislike\n      }\n\n      // if(ret.code==0){\n        // this.likeStatus = ret.data.like\n        // this.dislikeStatus = ret.data.dislike\n      // }\n    },\n    async likeAction(){\n      // 点赞和取消\n      let type= this.likeStatus ?'delete':'put'\n\n      let ret = await this.$http[type]('/user/likeArticle/'+this.id)\n      if(ret.code==0){\n        // 取巧，简单粗暴\n        this.getArticle()\n        // this.getLikeStatus()\n        this.$notify({\n          title:ret.message,\n          type:'success'\n        })\n      }\n    },\n\n    async getArticle(){\n      let ret = await this.$http.get('/article/'+this.id)\n      this.article = ret.data\n      if(this.token){\n        this.checkFollowStatus()\n        this.getLikeStatus()\n      }\n    },\n    async checkFollowStatus(){\n      // 获取关注状态\n      let ret = await this.$http.get('/user/follow/'+this.article.author._id)\n      if(ret.code==0){\n        this.isFollow = ret.data.isFollow\n      }\n    },\n    async follow(){\n      let ret = await this.$http.put('/user/follow/'+this.article.author._id)\n      this.checkFollowStatus()\n    },\n    async cancelfollow(){\n      let ret = await this.$http.delete('/user/follow/'+this.article.author._id)\n      this.checkFollowStatus()\n    }\n  }\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./_id.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./_id.vue?vue&type=template&id=50e7b214&\"\nimport script from \"./_id.vue?vue&type=script&lang=js&\"\nexport * from \"./_id.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./_id.vue?vue&type=style&index=0&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"0f5b016d\"\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/dist/cjs.js??ref--3-oneOf-1-1!../../postcss-loader/src/index.js??ref--3-oneOf-1-2!./atom-one-dark.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\nrequire(\"!../../vue-style-loader/lib/addStylesServer.js\").default(\"03962918\", content, true)"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACVA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAJA;AASA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AArDA;AA1BA;;ACjCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}