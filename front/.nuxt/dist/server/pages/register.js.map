{"version":3,"file":"pages/register.js","sources":["webpack:///./pages/register.vue?9988","webpack:///./pages/register.vue","webpack:///./pages/register.vue?471b","webpack:///./pages/register.vue?f4d7"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('el-form',{ref:\"registerForm\",staticClass:\"login-form\",attrs:{\"label-width\":\"100px\",\"model\":_vm.form,\"rules\":_vm.rules}},[_c('div',{staticClass:\"title-container\"},[_c('img',{attrs:{\"src\":\"/logo.png\",\"alt\":\"\"}})]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入邮箱\"},model:{value:(_vm.form.email),callback:function ($$v) {_vm.$set(_vm.form, \"email\", $$v)},expression:\"form.email\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"captcha-container\",attrs:{\"prop\":\"captcha\",\"label\":\"图片验证码\"}},[_c('div',{staticClass:\"captcha\"},[_c('img',{attrs:{\"src\":_vm.code.captcha},on:{\"click\":_vm.resetCaptcha}})]),_vm._v(\" \"),_c('el-input',{attrs:{\"placeholder\":\"请输入验证码\"},model:{value:(_vm.form.captcha),callback:function ($$v) {_vm.$set(_vm.form, \"captcha\", $$v)},expression:\"form.captcha\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"nickname\",\"label\":\"昵称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入昵称\"},model:{value:(_vm.form.nickname),callback:function ($$v) {_vm.$set(_vm.form, \"nickname\", $$v)},expression:\"form.nickname\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"passwd\",\"label\":\"密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\"},model:{value:(_vm.form.passwd),callback:function ($$v) {_vm.$set(_vm.form, \"passwd\", $$v)},expression:\"form.passwd\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"repasswd\",\"label\":\"确认密码\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.form.repasswd),callback:function ($$v) {_vm.$set(_vm.form, \"repasswd\", $$v)},expression:\"form.repasswd\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\" \"}},[_c('el-button',{attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.handleRegister($event)}}},[_vm._v(\"注册\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport md5 from 'md5'\nexport default {\n  layout:'login',\n  methods:{\n    resetCaptcha(){\n      this.code.captcha = '/api/captcha?_t'+new Date().getTime()\n    },\n    handleRegister(){\n      this.$refs.registerForm.validate( async valid=>{\n        if(valid){\n          console.log('校验成功')\n          // @todo 发送注册请求\n          let obj = {\n            email:this.form.email,\n            nickname:this.form.nickname,\n            passwd:md5(this.form.passwd),\n            captcha:this.form.captcha,\n          }\n          let ret = await this.$http.post('/user/register',obj)\n          // code=0 就是成功\n          console.log(ret)\n          if(ret.code==0){\n            this.$alert('注册成功','成功',{\n              confirmButtonText:\"去登录\",\n              callback:()=>{\n                this.$router.push(\"/login\")\n              }\n            })\n          }else{\n            this.$message.error(ret.message)\n          }\n        }else{\n          console.log('校验失败')\n        }\n      })\n    }\n  },\n  data(){\n    return {\n      form:{\n        email:\"1017665401@qq.com\",\n        nickname:\"Will\",\n        passwd:\"123456\",\n        repasswd:\"123456\",\n        captcha:\"\"\n      },\n      rules:{\n        email:[\n          { required:true, message:\"请输入邮箱\" },\n          { type:'email', message:\"请输入正确的邮箱格式\" },\n        ],\n        captcha:[\n          { required:true, message:\"请输入验证码\" },\n        ],\n        nickname:[\n          { required:true, message:\"请输入昵称\" },\n        ],\n        passwd:[\n          { required:true, pattern:/^[\\w_-]{6,12}$/g, message:\"请输入6~12位密码\" },\n        ],\n        repasswd:[\n          { required:true, message:\"请再次输入密码\" },\n          { validator:(rule,value,callback)=>{\n            if(value!== this.form.passwd){\n              callback(new Error('两次密码不一致'))\n            }\n            callback()\n          }}\n        ],    \n      },\n      code:{\n        captcha:\"/api/captcha\"\n      }\n    }\n  }\n}\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./register.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./register.vue?vue&type=template&id=03fbe59b&\"\nimport script from \"./register.vue?vue&type=script&lang=js&\"\nexport * from \"./register.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"20340e07\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;AACA;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AALA;AAhBA;AAwBA;AACA;AADA;AAhCA;AAoCA;AACA;AA1EA;;AC3CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}